
{% block content %}
  <h2>Monthly Summary - {{ month }}/{{ year }}</h2>

  <form method="get">
    <label for="month">Month:</label>
    <select name="month" id="month">
      {% for m in range(1, 13) %}
        <option value="{{ m }}" {% if m == month %}selected{% endif %}>{{ m }}</option>
      {% endfor %}
    </select>
    <label for="year">Year:</label>
    <input type="number" name="year" value="{{ year }}" />
    <button type="submit">Filter</button>
  </form>

  <table border="1" cellpadding="8" cellspacing="0">
    <thead>
      <tr>
        <th>Friend</th>
        <th>Paid</th>
        <th>Owed</th>
        <th>Received</th>
        <th>Net Balance</th>
      </tr>
    </thead>
    <tbody>
      {% for data in summary.values() %}
        <tr>
          <td>{{ data.name }}</td>
          <td>₹{{ "%.2f"|format(data.paid) }}</td>
          <td>₹{{ "%.2f"|format(data.owed) }}</td>
          <td>₹{{ "%.2f"|format(data.received) }}</td>
          <td>
            {% if data.net_balance > 0 %}
              <span style="color:green;">₹{{ "%.2f"|format(data.net_balance) }}</span>
            {% elif data.net_balance < 0 %}
              <span style="color:red;">₹{{ "%.2f"|format(data.net_balance) }}</span>
            {% else %}
              ₹0.00
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
